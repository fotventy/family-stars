# üè† –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Family Stars

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–º–µ–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

#### –®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
```bash
POST /api/add-family-system
```
–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- ‚úÖ `success: true`
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ –ø–æ–ª—è—Ö

#### –®–∞–≥ 2: –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
POST /api/migrate-existing-users
```
–≠—Ç–æ—Ç —à–∞–≥ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ —É–∂–µ –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

### 2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–π —Å–µ–º—å–∏**

#### –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ–º—å–∏:
```
/register-family
```

#### –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
- **Email**: test-family@example.com
- **–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏**: –¢–µ—Å—Ç–æ–≤–∞—è —Å–µ–º—å—è
- –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å —Å–µ–º—å—é"

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- ‚úÖ –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–¥–µ —Å–µ–º—å–∏

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞**

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞:
```
/first-login?token=–ü–û–õ–£–ß–ï–ù–ù–´–ô_–¢–û–ö–ï–ù
```

#### –®–∞–≥ 1: –í–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- –í–≤–µ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ù–∞–∂–∞—Ç—å "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"

#### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è
- –í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å
- –ù–∞–∂–∞—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å"

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –ø–∞–Ω–µ–ª—å

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–º—å–µ–π**

#### –í —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏:
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ç–∞–± "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º—å—è"
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å—ë–π"

#### –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–º—å–µ
- ‚úÖ –ö–æ–¥ —Å–µ–º—å–∏ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- ‚úÖ –°–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–ª–µ–Ω–∞ —Å–µ–º—å–∏:
- –ù–∞–∂–∞—Ç—å "‚ûï –î–æ–±–∞–≤–∏—Ç—å —á–ª–µ–Ω–∞ —Å–µ–º—å–∏"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
  - **–ò–º—è**: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–±–µ–Ω–æ–∫
  - **–†–æ–ª—å**: üë∂ –†–µ–±–µ–Ω–æ–∫
- –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å"

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –¥–ª—è —Ä–µ–±–µ–Ω–∫–∞
- ‚úÖ –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —Ä–µ–±–µ–Ω–∫–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –∏ —Å—Å—ã–ª–∫–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏

### 5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞ —Ä–µ–±–µ–Ω–∫–∞**

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è —Ä–µ–±–µ–Ω–∫–∞:
```
/first-login?token=–¢–û–ö–ï–ù_–†–ï–ë–ï–ù–ö–ê
```

#### –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞:
- –í–≤–µ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —Ä–µ–±–µ–Ω–∫–∞
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
- –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥–µ—Ç—Å–∫—É—é –ø–∞–Ω–µ–ª—å
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π –∏ –ø–æ–¥–∞—Ä–∫–æ–≤

### 6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–µ–π–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
- –†–æ–¥–∏—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Å–µ—Ö –¥–µ—Ç–µ–π –≤ —Å–µ–º—å–µ
- –î–µ—Ç–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–¥–∞—Ä–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–π —Å–µ–º—å–∏

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Å–µ–º–µ–π:
- –°–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é —Å–µ–º—å—é
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ–º—å–∏ –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–µ–º—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è `/api/add-family-system` –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: "–¢–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å FAMILY_ADMIN –∏–ª–∏ PARENT

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–ª–µ–Ω—ã —Å–µ–º—å–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Å–µ–º—å–µ —á–µ—Ä–µ–∑ familyId

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±–∞–∑–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:

### –¢–∞–±–ª–∏—Ü–∞ Family:
- –ó–∞–ø–∏—Å–∏ —Å–µ–º–µ–π —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ inviteCode
- –°–≤—è–∑—å adminId —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –¢–∞–±–ª–∏—Ü–∞ User (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è):
- –ü–æ–ª—è email, familyId, tempPassword, mustChangePassword
- –°–≤—è–∑–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–µ–º—å—è–º–∏

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `FAMILY_ADMIN` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–µ–º—å–∏
- `PARENT` - —Ä–æ–¥–∏—Ç–µ–ª—å
- `CHILD` - —Ä–µ–±–µ–Ω–æ–∫

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –°–µ–º–µ–π–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ–º—å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –ò–∑–æ–ª—è—Ü–∏—è —Å–µ–º–µ–π –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- [ ] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –Ω–∞—Ä—É—à–µ–Ω—ã

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π**: –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤—Ö–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ email
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –î–æ–±–∞–≤–∏—Ç—å email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —á–ª–µ–Ω–æ–≤
3. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–º—å–µ–π
4. **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö 